name: "CodeQL"

on:

  push:

    branches: [ master ]

  pull_request:

    # The branches below must be a subset of the branches above

    branches: [ master ]

  schedule:

    - cron: '20 6 * * 0'

 

jobs:

  analyze:

    name: Analyze

    runs-on: ubuntu-latest

 

    strategy:

      fail-fast: false

 

    steps:

    - name: Checkout repository

      uses: actions/checkout@v2

    

    - name: Initialize CodeQL

      uses: github/codeql-action/init@v1

# Start code changes

    - name: Install dependencies

      run: |
      sudo apt-get update -y |
      sudo apt-get install -y flex-old bison libncurses5-dev libncursesw5-dev

    - name: Build

      run: ./configure |
      make |
      make check |
      make install

# End code changes

    - name: Perform CodeQL Analysis

      uses: github/codeql-action/analyze@v1
